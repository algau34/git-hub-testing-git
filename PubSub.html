<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script src="Core/PubSub.js"></script>
	<script type="text/javascript">

		//Basic example :
		// create a function to subscribe to topics
	 function mySubscriber1(msg, data) {
			console.log( 'mySubscriber1', msg, data );
		};



		// add the function to the list of subscribers for a particular topic
		// we're keeping the returned token, in order to be able to unsubscribe
		// from the topic later on
		var token = PubSub.subscribe('MY TOPIC1', mySubscriber1);
		PubSub.subscribe('MY TOPIC 2', mySubscriber1);
		PubSub.subscribe('MY TOPIC 3', mySubscriber1);
		// publish a topic asynchronously
		PubSub.publish('MY TOPIC 1', 'hello world!');

		// publish a topic synchronously, which is faster in some environments,
		// but will get confusing when one topic triggers new topics in the
		// same execution chain
		// USE WITH CAUTION, HERE BE DRAGONS!!!
		PubSub.publishSync('MY TOPIC 3', 'hello world!');
	//	Cancel specific subscription
		// create a function to receive the topic
	 function mySubscriber2(msg, data) {
			console.log("-------------\n",msg, data);
		};

		// add the function to the list of subscribers to a particular topic
		// we're keeping the returned token, in order to be able to unsubscribe
		// from the topic later on
		var token = PubSub.subscribe('MY TOPIC', mySubscriber2);
		var list = PubSub.getSubscriptions( 'MY TOPIC 3') ;
		console.log("list",list );
		// unsubscribe this subscriber from this topic
		//PubSub.unsubscribe(token);
		//Cancel all subscriptions for a function  :
		// create a function to receive the topic
	    function mySubscriber3(msg, data) {
			console.log(msg, data);
		};

		// unsubscribe mySubscriber from ALL topics
		PubSub.unsubscribe(mySubscriber3);
	//	Clear all subscriptions for a topic  :
		PubSub.subscribe('a', function(){console.log("funct n¬∞ 1 !")});
		PubSub.subscribe('a.b', function(){console.log("funct n¬∞ 2 !")});
		PubSub.subscribe('a.b.c', function(){console.log("funct n¬∞ 3 !")});

		PubSub.unsubscribe('a.b');




		// no further notifications for 'a.b' and 'a.b.c' topics
		// notifications for 'a' will still get published
	//	Clear all subscriptions :
		PubSub.clearAllSubscriptions();
		// all subscriptions are removed
		//Get Subscriptions :
		  list = PubSub.getSubscriptions('token');
		console.log("list",list)
		// subscriptions by token from all topics
	//	Count Subscriptions :
		PubSub.countSubscriptions('token');
		// count by token from all topics
	//	Error Handling :
		// isPublished is a boolean that represents if any subscribers was registered for this topic
		var isPublished = PubSub.publish('a');

		// token will be false if something went wrong and subscriber was not registered
		var token = PubSub.subscribe('MY TOPIC', mySubscriber3);
	//	Hierarchical addressing :
		// create a subscriber to receive all topics from a hierarchy of topics
	  function myToplevelSubscriber(msg, data) {
			console.log('top level: ', msg, data);
		}

		// subscribe to all topics in the 'car' hierarchy
		PubSub.subscribe('car', myToplevelSubscriber);

		// create a subscriber to receive only leaf topic from hierarchy op topics
	 function mySpecificSubscriber(msg, data) {
			console.log('specific: ', msg, data);
		}

		// subscribe only to 'car.drive' topics
		PubSub.subscribe('car.drive', mySpecificSubscriber);

		// Publish some topics
		PubSub.publish('car.purchase', {name: 'my new car'});
		PubSub.publish('car.drive', {speed: '14'});
		PubSub.publish('car.sell', {newOwner: 'someone else'});

		// In this scenario, myToplevelSubscriber will be called for all
		// topics, three times in total
		// But, mySpecificSubscriber will only be called once, as it only
		// subscribes to the 'car.drive' topic

	//	Tips
	//	Use "constants" for topics and not string literals. PubSubJS uses strings as topics, and will happily try to deliver your topics with ANY topic. So, save yourself from frustrating debugging by letting the JavaScript engine complain when you make typos.

		//	Example of use of "constants" :
		// üëé Bad usage
		PubSub.subscribe('hello', function (msg, data) {
			console.log(data)
		});

		PubSub.publish('hello', 'world');

		// üëç Better usage
		var MY_TOPIC = 'hello';
		PubSub.subscribe(MY_TOPIC, function (msg, data) {
			console.log(data)
		});

		PubSub.publish(MY_TOPIC, 'world');
	//	Example of use of "symbol constants" with ES6/7 syntax
		// event-types.js
         MY_TOPIC = Symbol('MY_TOPIC')


		PubSub.subscribe(MY_TOPIC, function (msg, data) {
			console.log(data)
		});

		PubSub.publish(MY_TOPIC, 'world');



	</script>

</head>
<body>

</body>
</html>
