<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>FingerActions.js - Documentation</title><meta property="og:title" content=""/><meta property="og:type" content="website"/><meta property="og:image" content=""/><meta property="og:url" content=""/><script src="scripts/prettify/prettify.js"></script><script src="scripts/prettify/lang-css.js"></script><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link type="text/css" rel="stylesheet" href="styles/prettify.css"><link type="text/css" rel="stylesheet" href="styles/jsdoc.css"><script src="scripts/nav.js" defer></script><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><input type="checkbox" id="nav-trigger" class="nav-trigger" /><label for="nav-trigger" class="navicon-button x"><div class="navicon"></div></label><label for="nav-trigger" class="overlay"></label><nav class="wrap"><input type="text" id="nav-search" placeholder="Search" /><h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ArrayExtd.html">ArrayExtd</a><ul class='methods'><li data-type='method' title='get of ArrayExtd'  style='display: none;'><a href="ArrayExtd.html#get">get</a></li></ul></li><li><a href="Cr.html">Cr</a><ul class='methods'><li data-type='method' title='dataSize of Cr'  style='display: none;'><a href="Cr.html#.dataSize">dataSize</a></li><li data-type='method' title='getFile of Cr'  style='display: none;'><a href="Cr.html#.getFile">getFile</a></li><li data-type='method' title='importScript of Cr'  style='display: none;'><a href="Cr.html#.importScript">importScript</a></li></ul></li><li><a href="cwui.html">cwui</a><ul class='members'><li data-type='member' style='display: none;'><a href="cwui.html#.activateKeyEvents">activateKeyEvents</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.customRoutines">customRoutines</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.fileCache">fileCache</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.imagesUrl">imagesUrl</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.pageTransition">pageTransition</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.resizables">resizables</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.trackedEvents">trackedEvents</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.transitions">transitions</a></li><li data-type='member' style='display: none;'><a href="cwui.html#.vKeyboard">vKeyboard</a></li></ul><ul class='methods'><li data-type='method' title='_AddEvent of cwui'  style='display: none;'><a href="cwui.html#._AddEvent">_AddEvent</a></li><li data-type='method' title='_ClearFingerActions of cwui'  style='display: none;'><a href="cwui.html#._ClearFingerActions">_ClearFingerActions</a></li><li data-type='method' title='_ClearImageFrameRate of cwui'  style='display: none;'><a href="cwui.html#._ClearImageFrameRate">_ClearImageFrameRate</a></li><li data-type='method' title='_eventExist of cwui'  style='display: none;'><a href="cwui.html#._eventExist">_eventExist</a></li><li data-type='method' title='_GetRoutine of cwui'  style='display: none;'><a href="cwui.html#._GetRoutine">_GetRoutine</a></li><li data-type='method' title='_InitNewPage of cwui'  style='display: none;'><a href="cwui.html#._InitNewPage">_InitNewPage</a></li><li data-type='method' title='_NeutralizePageEvents of cwui'  style='display: none;'><a href="cwui.html#._NeutralizePageEvents">_NeutralizePageEvents</a></li><li data-type='method' title='_performWhenAllImgsLoaded of cwui'  style='display: none;'><a href="cwui.html#._performWhenAllImgsLoaded">_performWhenAllImgsLoaded</a></li><li data-type='method' title='_prepareTransition of cwui'  style='display: none;'><a href="cwui.html#._prepareTransition">_prepareTransition</a></li><li data-type='method' title='_RemoveEvent of cwui'  style='display: none;'><a href="cwui.html#._RemoveEvent">_RemoveEvent</a></li><li data-type='method' title='_RemovePreviousPage of cwui'  style='display: none;'><a href="cwui.html#._RemovePreviousPage">_RemovePreviousPage</a></li><li data-type='method' title='_SetImageURL of cwui'  style='display: none;'><a href="cwui.html#._SetImageURL">_SetImageURL</a></li><li data-type='method' title='_Transition__cross_fade of cwui'  style='display: none;'><a href="cwui.html#._Transition__cross_fade">_Transition__cross_fade</a></li><li data-type='method' title='_Transition__fade_to_black of cwui'  style='display: none;'><a href="cwui.html#._Transition__fade_to_black">_Transition__fade_to_black</a></li><li data-type='method' title='addCustom of cwui'  style='display: none;'><a href="cwui.html#.addCustom">addCustom</a></li><li data-type='method' title='bindVKeyboard of cwui'  style='display: none;'><a href="cwui.html#.bindVKeyboard">bindVKeyboard</a></li><li data-type='method' title='cancelConnect of cwui'  style='display: none;'><a href="cwui.html#.cancelConnect">cancelConnect</a></li><li data-type='method' title='getById of cwui'  style='display: none;'><a href="cwui.html#.getById">getById</a></li><li data-type='method' title='onKeyDown of cwui'  style='display: none;'><a href="cwui.html#.onKeyDown">onKeyDown</a></li><li data-type='method' title='onKeyUp of cwui'  style='display: none;'><a href="cwui.html#.onKeyUp">onKeyUp</a></li><li data-type='method' title='registerElements of cwui'  style='display: none;'><a href="cwui.html#.registerElements">registerElements</a></li><li data-type='method' title='reloadStyleSheets of cwui'  style='display: none;'><a href="cwui.html#.reloadStyleSheets">reloadStyleSheets</a></li><li data-type='method' title='resizeAll of cwui'  style='display: none;'><a href="cwui.html#.resizeAll">resizeAll</a></li><li data-type='method' title='setInnerHTML of cwui'  style='display: none;'><a href="cwui.html#.setInnerHTML">setInnerHTML</a></li><li data-type='method' title='showDialog of cwui'  style='display: none;'><a href="cwui.html#.showDialog">showDialog</a></li><li data-type='method' title='userCallback of cwui'  style='display: none;'><a href="cwui.html#.userCallback">userCallback</a></li><li data-type='method' title='_BodyTransition of cwui'  style='display: none;'><a href="cwui.html#_BodyTransition">_BodyTransition</a></li></ul></li><li><a href="documentExtd.html">documentExtd</a><ul class='methods'><li data-type='method' title='transformXHTMLToDom of documentExtd'  style='display: none;'><a href="documentExtd.html#.transformXHTMLToDom">transformXHTMLToDom</a></li></ul></li><li><a href="FileCache.html">FileCache</a><ul class='methods'><li data-type='method' title='load of FileCache'  style='display: none;'><a href="FileCache.html#load">load</a></li></ul></li><li><a href="FingerActions.html">FingerActions</a><ul class='methods'><li data-type='method' title='Bind of FingerActions'  style='display: none;'><a href="FingerActions.html#Bind">Bind</a></li><li data-type='method' title='Clear of FingerActions'  style='display: none;'><a href="FingerActions.html#Clear">Clear</a></li></ul></li><li><a href="GenericCache.html">GenericCache</a><ul class='methods'><li data-type='method' title='get of GenericCache'  style='display: none;'><a href="GenericCache.html#get">get</a></li></ul></li><li><a href="HTMLElementExtd.html">HTMLElementExtd</a><ul class='members'><li data-type='member' style='display: none;'><a href="HTMLElementExtd.html#.innerXHTML">innerXHTML</a></li></ul><ul class='methods'><li data-type='method' title='appendChildNodes of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#appendChildNodes">appendChildNodes</a></li><li data-type='method' title='getJs of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#getJs">getJs</a></li><li data-type='method' title='getParentByCssSelector of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#getParentByCssSelector">getParentByCssSelector</a></li><li data-type='method' title='moveStyleSheet of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#moveStyleSheet">moveStyleSheet</a></li><li data-type='method' title='nextSiblingByCssSelector of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#nextSiblingByCssSelector">nextSiblingByCssSelector</a></li><li data-type='method' title='nextSiblingByTagName of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#nextSiblingByTagName">nextSiblingByTagName</a></li><li data-type='method' title='previousSiblingByCssSelector of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#previousSiblingByCssSelector">previousSiblingByCssSelector</a></li><li data-type='method' title='previousSiblingByTagName of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#previousSiblingByTagName">previousSiblingByTagName</a></li><li data-type='method' title='removeComments of HTMLElementExtd'  style='display: none;'><a href="HTMLElementExtd.html#removeComments">removeComments</a></li></ul></li><li><a href="ImageFrameRate.html">ImageFrameRate</a><ul class='methods'><li data-type='method' title='Clear of ImageFrameRate'  style='display: none;'><a href="ImageFrameRate.html#Clear">Clear</a></li><li data-type='method' title='Set of ImageFrameRate'  style='display: none;'><a href="ImageFrameRate.html#Set">Set</a></li></ul></li><li><a href="mainCwui.html">mainCwui</a><ul class='methods'><li data-type='method' title='_BodyTransition of mainCwui'  style='display: none;'><a href="mainCwui.html#_BodyTransition">_BodyTransition</a></li><li data-type='method' title='execCommand of mainCwui'  style='display: none;'><a href="mainCwui.html#execCommand">execCommand</a></li><li data-type='method' title='initWebSock of mainCwui'  style='display: none;'><a href="mainCwui.html#initWebSock">initWebSock</a></li></ul></li><li><a href="OverlayCanvas.html">OverlayCanvas</a><ul class='methods'><li data-type='method' title='circle of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#circle">circle</a></li><li data-type='method' title='circleAlpha of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#circleAlpha">circleAlpha</a></li><li data-type='method' title='clear of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#clear">clear</a></li><li data-type='method' title='path of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#path">path</a></li><li data-type='method' title='rectAlpha of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#rectAlpha">rectAlpha</a></li><li data-type='method' title='rectangle of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#rectangle">rectangle</a></li><li data-type='method' title='resize of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#resize">resize</a></li><li data-type='method' title='text of OverlayCanvas'  style='display: none;'><a href="OverlayCanvas.html#text">text</a></li></ul></li><li><a href="StringExtd.html">StringExtd</a><ul class='methods'><li data-type='method' title='isHTML of StringExtd'  style='display: none;'><a href="StringExtd.html#isHTML">isHTML</a></li><li data-type='method' title='splice of StringExtd'  style='display: none;'><a href="StringExtd.html#splice">splice</a></li></ul></li><li><a href="Vector.html">Vector</a><ul class='methods'><li data-type='method' title='Amplitude of Vector'  style='display: none;'><a href="Vector.html#Amplitude">Amplitude</a></li><li data-type='method' title='BaryCenter of Vector'  style='display: none;'><a href="Vector.html#BaryCenter">BaryCenter</a></li><li data-type='method' title='DotProd of Vector'  style='display: none;'><a href="Vector.html#DotProd">DotProd</a></li><li data-type='method' title='IsNull of Vector'  style='display: none;'><a href="Vector.html#IsNull">IsNull</a></li><li data-type='method' title='Normalize of Vector'  style='display: none;'><a href="Vector.html#Normalize">Normalize</a></li><li data-type='method' title='Substract of Vector'  style='display: none;'><a href="Vector.html#Substract">Substract</a></li></ul></li><li><a href="VirtualKeyboard.html">VirtualKeyboard</a><ul class='methods'><li data-type='method' title='Bind of VirtualKeyboard'  style='display: none;'><a href="VirtualKeyboard.html#Bind">Bind</a></li><li data-type='method' title='Map of VirtualKeyboard'  style='display: none;'><a href="VirtualKeyboard.html#Map">Map</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#autoReplaceVariables">autoReplaceVariables</a></li><li><a href="global.html#CWUI">CWUI</a></li><li><a href="global.html#dataSize">dataSize</a></li><li><a href="global.html#delegate">delegate</a></li><li><a href="global.html#downloadAsFile">downloadAsFile</a></li><li><a href="global.html#escapeHtml">escapeHtml</a></li><li><a href="global.html#getCustomStyles">getCustomStyles</a></li><li><a href="global.html#getMock">getMock</a></li><li><a href="global.html#loadFile">loadFile</a></li><li><a href="global.html#loadFileAsync">loadFileAsync</a></li><li><a href="global.html#replaceVariables">replaceVariables</a></li></ul></nav><div id="main"><h1 class="page-title">FingerActions.js</h1><section><article><pre class="prettyprint source linenums"><code>/**
 * class FingerActions
 *  @classdesc Handle all finger actions of the current page
 */
class FingerActions {
	/**
	 * @constructor
	 */
	constructor() {
		this.eGesture = {grab: "grab", drag: "drag", pinch: "pinch", rotate: "rotate"}
		this.m_elements = [];
		this.m_onMouseDown = {
			handleEvent: (_event) => {
				this._OnMouseDown(_event);
			}
		};
		this.m_onMouseMove = {
			handleEvent: (_event) => {
				this._OnMouseMove(_event);
			}
		};
		this.m_onMouseUp = {
			handleEvent: (_event) => {
				this._OnMouseUp(_event);
			}
		};
		this.m_onTouchStart = {
			handleEvent: (_event) => {
				this._OnTouchStart(_event);
			}
		};
		this.m_onTouchMove = {
			handleEvent: (_event) => {
				this._OnTouchMove(_event);
			}
		};
		this.m_onTouchEnd = {
			handleEvent: (_event) => {
				this._OnTouchEnd(_event);
			}
		};
	}

	/**
	 *  Bind finger actions to a given element
	 *
	 * @param _element
	 * @param _events
	 */
	Bind(_element, _events) {
		this._UnBind(_element);
		this.m_elements.push({domElement: _element, fingers: [], events: _events});
		_element.addEventListener("mousedown", this.m_onMouseDown, true);
		_element.addEventListener("mousemove", this.m_onMouseMove, true);
		_element.addEventListener("mouseup", this.m_onMouseUp, true);
		_element.addEventListener("touchstart", this.m_onTouchStart, true);
		_element.addEventListener("touchmove", this.m_onTouchMove, true);
		_element.addEventListener("touchend", this.m_onTouchEnd, true);
		_element.addEventListener("touchcancel", this.m_onTouchEnd, true);
	}

	/**
	 * Clear finger actions for all elements
	 *
	 */
	Clear() {
		while (this.m_elements.length != 0)
			this._UnBind(this.m_elements[0].domElement);
	}

	// --- private methods:
	/**
	 * Unbind finger actions for a given dom element
	 *
	 * @param _element
	 * @private
	 */
	_UnBind(_element) {
		const element = this._GetElement(_element);
		if (element == null)
			return;
		_element.removeEventListener("mousedown", this.m_onMouseDown, true);
		_element.removeEventListener("mousemove", this.m_onMouseMove, true);
		_element.removeEventListener("mouseup", this.m_onMouseUp, true);
		_element.removeEventListener("touchstart", this.m_onTouchStart, true);
		_element.removeEventListener("touchmove", this.m_onTouchMove, true);
		_element.removeEventListener("touchend", this.m_onTouchEnd, true);
		_element.removeEventListener("touchcancel", this.m_onTouchEnd, true);
		this.m_elements.splice(this.m_elements.indexOf(element), 1);
	}

	/**
	 * Retrieve an element using a DOM target
	 *
	 * @param _target
	 * @returns {*}
	 * @private
	 */
	_GetElement(_target) {
		return this.m_elements.find((_element) => {
			return _element.domElement == _target;
		});
	}

	/**
	 * Retrieve a finger object using a touch identifier
	 *
	 * @param _element
	 * @param _identifier
	 * @returns {*}
	 * @private
	 */
	_GetFinger(_element, _identifier) {
		return _element.fingers.find((_finger) => {
			return _finger.identifier == _identifier;
		});
	}

	/**
	 * Retrieve a finger object using a finger index
	 *
	 * @param _element
	 * @param _index
	 * @returns {*}
	 * @private
	 */
	_GetFingerByIndex(_element, _index) {
		return _element.fingers.find((_finger) => {
			return _finger.index == _index;
		});
	}

	/**
	 * Get the first available finger index
	 *
	 * @param _element
	 * @returns {number}
	 * @private
	 */
	_AvailableFingerIndex(_element) {
		var index = 0;
		while (_element.fingers.find((_finger) => {
			return _finger.index == index;
		}) != null)
			index++;
		return index;
	}

	/**
	 * Common touches event actions then call
	 * an action for each changed touch
	 *
	 * @param _event
	 * @param _fnTouch
	 * @returns {*}
	 * @private
	 */
	_ForEachChangedTouch(_event, _fnTouch) {
		_event.preventDefault();
		const element = this._GetElement(_event.currentTarget);
		for (var i = 0; i &lt; _event.changedTouches.length; i++)
			_fnTouch(element, _event.changedTouches[i]);
		return element;
	}

	/**
	 * Common mouse event actions then call an action
	 *
	 * @param _event
	 * @param _fnAction
	 * @returns {*}
	 * @private
	 */
	_ForMouseEvent(_event, _fnAction) {
		_event.preventDefault();
		const element = this._GetElement(_event.currentTarget);
		_fnAction(element);
		return element;
	}

	/**
	 * Common touch start code
	 *
	 * @param _element
	 * @param _identifier
	 * @param _container
	 * @private
	 */
	_Common_OnTouchStart(_element, _identifier, _container) {
		const brect = _element.domElement.getBoundingClientRect();
		const relatedPos = new Vector(Math.floor(_container.clientX - brect.left), Math.floor(_container.clientY - brect.top));
		const insertedFinger = _element.fingers[_element.fingers.push({
																		  identifier: _identifier,
																		  index     : this._AvailableFingerIndex(_element),
																		  position  : relatedPos,
																		  anchor    : relatedPos
																	  }) - 1];
		if (_element.events.onFingerPress != null)
			_element.events.onFingerPress({index: insertedFinger.index, position: insertedFinger.position});
	}

	/**
	 * Common pick code
	 *
	 * @param _element
	 * @private
	 */
	_Common_OnPick(_element) {
		if (_element.action == null &amp;&amp; _element.fingers.length == 1 &amp;&amp; _element.events.onPick != null)
			_element.events.onPick({position: _element.fingers[0].position});
	}

	/**
	 * Finger touch start
	 *
	 * @param _event
	 * @private
	 */
	_OnTouchStart(_event) {
		this._Common_OnPick(this._ForEachChangedTouch(_event, (_element, _touch) => {
			this._Common_OnTouchStart(_element, _touch.identifier, _touch);
		}));
	}

	/**
	 * Mouse down
	 *
	 * @param _event
	 * @private
	 */
	_OnMouseDown(_event) {
		this._Common_OnPick(this._ForMouseEvent(_event, (_element) => {
			this._Common_OnTouchStart(_element, "mouse", _event);
		}));
		_event.currentTarget.setPointerCapture(1);
	}

	/**
	 * Common touch move code
	 *
	 * @param _element
	 * @param _identifier
	 * @param _container
	 * @private
	 */
	_Common_OnTouchMove(_element, _identifier, _container) {
		var finger = this._GetFinger(_element, _identifier);
		if (finger == null)
			return;
		const brect = _element.domElement.getBoundingClientRect();
		finger.position = new Vector(Math.floor(_container.clientX - brect.left), Math.floor(_container.clientY - brect.top));
		finger.offset = finger.position.Substract(finger.anchor);
		if (_element.events.onFingerMove != null)
			_element.events.onFingerMove({index: finger.index, position: finger.position, offset: finger.offset});
	}

	/**
	 * Get the current fingers action
	 *
	 * @param _element
	 * @param _finger0
	 * @param _finger1
	 * @returns {string|null|*}
	 * @private
	 */
	_GetAction(_element, _finger0, _finger1) {
		if (_element.action != null)
			return _element.action;
		if (_finger0.offset.IsNull())
			return null;
		if (_element.fingers.length == 1)
			return this.eGesture.drag;
		_finger0.cumulator = _finger0.cumulator == null ? 0 : _finger0.cumulator + 1;
		if (_finger0.cumulator &lt;= 2)
			return null;
		if (_finger1.offset.IsNull())
			return null;
		_finger1.cumulator = _finger1.cumulator == null ? 0 : _finger1.cumulator + 1;
		if (_finger1.cumulator &lt;= 2)
			return null;
		if (_finger0.offset.DotProd(_finger1.offset) > 0.9)
			return this.eGesture.grab;
		const barycenter = _finger0.position.BaryCenter(_finger1.position);
		const dot = barycenter.Substract(_finger0.position).DotProd(_finger0.offset) * barycenter.Substract(_finger1.position).DotProd(_finger1.offset);
		if (dot &lt;= -0.2 || dot >= 0.2)
			return this.eGesture.pinch;
		_element.startAngle = Math.acos(_finger0.position.Substract(barycenter).DotProd(new Vector(1, 0)));
		return this.eGesture.rotate;
	}

	/**
	 * Common gestures progress code
	 *
	 * @param _element
	 * @private
	 */
	_Common_OnGestureProgress(_element) {
		if (_element.events.onGestureProgress == null)
			return;
		const finger0 = this._GetFingerByIndex(_element, 0);
		if (finger0 == null)
			return;
		const finger1 = this._GetFingerByIndex(_element, 1);
		_element.action = this._GetAction(_element, finger0, finger1);
		switch (_element.action) {
			case this.eGesture.drag:
			case this.eGesture.grab:
				_element.events.onGestureProgress({
													  action  : _element.action,
													  position: finger0.position,
													  offset  : finger0.offset == null ? {x: 0, y: 0} : finger0.offset
												  });
				break;
			case this.eGesture.pinch:
				_element.events.onGestureProgress({
													  action  : _element.action,
													  distance: Math.floor(finger1.position.Substract(finger0.position).Amplitude() - finger1.anchor.Substract(finger0.anchor).Amplitude())
												  });
				break;
			case this.eGesture.rotate:
				_element.events.onGestureProgress({
													  action: _element.action,
													  angle : (Math.acos(finger0.position.Substract(finger0.position.BaryCenter(finger1.position)).DotProd(new Vector(1, 0))) - _element.startAngle) * 180 / Math.PI
												  });
				break;
		}
	}

	/**
	 * Finger touch move
	 *
	 * @param _event
	 * @private
	 */
	_OnTouchMove(_event) {
		this._Common_OnGestureProgress(this._ForEachChangedTouch(_event, (_element, _touch) => {
			this._Common_OnTouchMove(_element, _touch.identifier, _touch);
		}));
	}

	/**
	 * Mouse move
	 *
	 * @param _event
	 * @private
	 */
	_OnMouseMove(_event) {
		this._Common_OnGestureProgress(this._ForMouseEvent(_event, (_element) => {
			this._Common_OnTouchMove(_element, "mouse", _event);
		}));
	}

	/**
	 * Common touch end code
	 *
	 * @param _element
	 * @param _identifier
	 * @private
	 */
	_Common_OnTouchEnd(_element, _identifier) {
		const finger = this._GetFinger(_element, _identifier);
		if (_element.events.onFingerRelease != null)
			_element.events.onFingerRelease(finger);
		_element.fingers.splice(_element.fingers.indexOf(finger), 1);
	}

	/**
	 * Common gestures end code
	 *
	 * @param _event
	 * @param _element
	 * @private
	 */
	_Common_OnGestureEnd(_event, _element) {
		if (_element.fingers.length != 0 || _element.action == null)
			return;
		if (_element.events.onGestureEnd != null)
			_element.events.onGestureEnd({action: _element.action});
		_element.action = null;
	}

	/**
	 * Finger touch end
	 *
	 * @param _event
	 * @private
	 */
	_OnTouchEnd(_event) {
		this._Common_OnGestureEnd(_event, this._ForEachChangedTouch(_event, (_element, _touch) => {
			this._Common_OnTouchEnd(_element, _touch.identifier);
		}));
	}

	/**
	 * Mouse up
	 *
	 * @param _event
	 * @private
	 */
	_OnMouseUp(_event) {
		this._Common_OnGestureEnd(_event, this._ForMouseEvent(_event, (_element) => {
			this._Common_OnTouchEnd(_element, "mouse");
		}));
		_event.currentTarget.releasePointerCapture(1);
	}
}
</code></pre></article></section></div><br class="clear"><footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Sat Sep 04 2021 10:29:09 GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer><script>prettyPrint();</script><script src="scripts/polyfill.js"></script><script src="scripts/linenumber.js"></script><script src="scripts/search.js" defer></script><script src="scripts/collapse.js" defer></script></body></html>
