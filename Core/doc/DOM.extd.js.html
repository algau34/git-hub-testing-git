<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>DOM.extd.js - Documentation</title>
	<meta property="og:title" content=""/>
	<meta property="og:type" content="website"/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<script src="scripts/prettify/prettify.js"></script>
	<script src="scripts/prettify/lang-css.js"></script>
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/prettify.css">
	<link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
	<script src="scripts/nav.js" defer></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body><input type="checkbox" id="nav-trigger" class="nav-trigger"/><label for="nav-trigger" class="navicon-button x">
	<div class="navicon"></div>
</label><label for="nav-trigger" class="overlay"></label>
<nav class="wrap"><input type="text" id="nav-search" placeholder="Search"/>
	<h2><a href="index.html">Home</a></h2>
	<h3>Classes</h3>
	<ul>
		<li><a href="ArrayExtd.html">ArrayExtd</a>
			<ul class='methods'>
				<li data-type='method' title='get of ArrayExtd' style='display: none;'><a
						href="ArrayExtd.html#get">get</a></li>
			</ul>
		</li>
		<li><a href="Cr.html">Cr</a>
			<ul class='members'>
				<li data-type='member' style='display: none;'><a href="Cr.html#.targetUrl">targetUrl</a></li>
			</ul>
			<ul class='methods'>
				<li data-type='method' title='getFile of Cr' style='display: none;'><a
						href="Cr.html#.getFile">getFile</a></li>
				<li data-type='method' title='importScript of Cr' style='display: none;'><a
						href="Cr.html#.importScript">importScript</a></li>
			</ul>
		</li>
		<li><a href="CSSStyleSheetExtd.html">CSSStyleSheetExtd</a>
			<ul class='methods'>
				<li data-type='method' title='addCSSRuleInJson of CSSStyleSheetExtd' style='display: none;'><a
						href="CSSStyleSheetExtd.html#addCSSRuleInJson">addCSSRuleInJson</a></li>
			</ul>
		</li>
		<li><a href="documentExtd.html">documentExtd</a>
			<ul class='methods'>
				<li data-type='method' title='createStyleSheet of documentExtd' style='display: none;'><a
						href="documentExtd.html#.createStyleSheet">createStyleSheet</a></li>
				<li data-type='method' title='transformXHTMLToDom of documentExtd' style='display: none;'><a
						href="documentExtd.html#.transformXHTMLToDom">transformXHTMLToDom</a></li>
			</ul>
		</li>
		<li><a href="HTMLElementExtd.html">HTMLElementExtd</a>
			<ul class='members'>
				<li data-type='member' style='display: none;'><a href="HTMLElementExtd.html#.innerXHTML">innerXHTML</a>
				</li>
			</ul>
			<ul class='methods'>
				<li data-type='method' title='appendChildNodes of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#appendChildNodes">appendChildNodes</a></li>
				<li data-type='method' title='getCalculatedCss of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#getCalculatedCss">getCalculatedCss</a></li>
				<li data-type='method' title='getCss of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#getCss">getCss</a></li>
				<li data-type='method' title='getJs of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#getJs">getJs</a></li>
				<li data-type='method' title='getParentByCssSelector of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#getParentByCssSelector">getParentByCssSelector</a></li>
				<li data-type='method' title='moveStyleSheet of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#moveStyleSheet">moveStyleSheet</a></li>
				<li data-type='method' title='nextSiblingByCssSelector of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#nextSiblingByCssSelector">nextSiblingByCssSelector</a></li>
				<li data-type='method' title='nextSiblingByTagName of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#nextSiblingByTagName">nextSiblingByTagName</a></li>
				<li data-type='method' title='previousSiblingByCssSelector of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#previousSiblingByCssSelector">previousSiblingByCssSelector</a></li>
				<li data-type='method' title='previousSiblingByTagName of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#previousSiblingByTagName">previousSiblingByTagName</a></li>
				<li data-type='method' title='removeComments of HTMLElementExtd' style='display: none;'><a
						href="HTMLElementExtd.html#removeComments">removeComments</a></li>
			</ul>
		</li>
		<li><a href="JSONExtd.html">JSONExtd</a>
			<ul class='methods'>
				<li data-type='method' title='transformToCss of JSONExtd' style='display: none;'><a
						href="JSONExtd.html#.transformToCss">transformToCss</a></li>
			</ul>
		</li>
		<li><a href="ObjectExtd.html">ObjectExtd</a></li>
		<li><a href="PubSub.html">PubSub</a>
			<ul class='members'>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.ALL_SUBSCRIBING_MSG">ALL_SUBSCRIBING_MSG</a>
				</li>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.getInstance">getInstance</a></li>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.immediateExceptions">immediateExceptions</a>
				</li>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.instance">instance</a></li>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.lastUid">lastUid</a></li>
				<li data-type='member' style='display: none;'><a href="PubSub.html#.messages">messages</a></li>
			</ul>
			<ul class='methods'>
				<li data-type='method' title='clearAllSubscriptions of PubSub' style='display: none;'><a
						href="PubSub.html#.clearAllSubscriptions">clearAllSubscriptions</a></li>
				<li data-type='method' title='clearSubscriptions of PubSub' style='display: none;'><a
						href="PubSub.html#.clearSubscriptions">clearSubscriptions</a></li>
				<li data-type='method' title='countSubscriptions of PubSub' style='display: none;'><a
						href="PubSub.html#.countSubscriptions">countSubscriptions</a></li>
				<li data-type='method' title='getSubscriptions of PubSub' style='display: none;'><a
						href="PubSub.html#.getSubscriptions">getSubscriptions</a></li>
				<li data-type='method' title='publish of PubSub' style='display: none;'><a href="PubSub.html#.publish">publish</a>
				</li>
				<li data-type='method' title='publishSync of PubSub' style='display: none;'><a
						href="PubSub.html#.publishSync">publishSync</a></li>
				<li data-type='method' title='subscribe of PubSub' style='display: none;'><a
						href="PubSub.html#.subscribe">subscribe</a></li>
				<li data-type='method' title='subscribeAll of PubSub' style='display: none;'><a
						href="PubSub.html#.subscribeAll">subscribeAll</a></li>
				<li data-type='method' title='subscribeOnce of PubSub' style='display: none;'><a
						href="PubSub.html#.subscribeOnce">subscribeOnce</a></li>
				<li data-type='method' title='unsubscribe of PubSub' style='display: none;'><a
						href="PubSub.html#.unsubscribe">unsubscribe</a></li>
			</ul>
		</li>
		<li><a href="StringExtd.html">StringExtd</a>
			<ul class='methods'>
				<li data-type='method' title='performOnStrHTMLBySelector of StringExtd' style='display: none;'><a
						href="StringExtd.html#performOnStrHTMLBySelector">performOnStrHTMLBySelector</a></li>
				<li data-type='method' title='shuffle of StringExtd' style='display: none;'><a
						href="StringExtd.html#shuffle">shuffle</a></li>
			</ul>
		</li>
	</ul>
</nav>
<div id="main"><h1 class="page-title">DOM.extd.js</h1>
	<section>
		<article><pre class="prettyprint source linenums"><code>/**
 * Created by jetbrains web development IDE ( Web/PhpStorm ).
 * Project: define-newElementHTML - myProject
 * User: algau34
 * Mail: al.gau@free.fr
 * Date: 14/06/2021
 * Time: 10:43
 */

/**
 * redefine INNERHTML
 * Element.innerXHTML
 * getter &amp; setter
 * like innerHTML , only one difference,
 * js will evaluated,if it is in script tag
 */

Object.defineProperties(HTMLElementExtd.prototype, {

	/**
	 *  @desc
	 *  HTMLElementExtd.innerXHTML (HTMLElement.innerXHTML) - GETTER and SETTER,
	 *  like innerHTML, only a few differences, js will be evaluated,
	 *  if it is in the script tag. It redefines a stylesheet
	 *  moved to the HEAD for more efficiency in the page header.
	 *  It cleans the html of residual tags,in document body, no duplicate meta tag in the body,
	 *  and finally it executes all js code only when dom js is parsed.
	 *  This is implemented in pure DOMJS.
	 *
	 * @memberof HTMLElementExtd
	 *
	 * @type {String}
	 */
	innerXHTML: {
		get: function() {
			return this.innerHTML;
		},
		set: function(xhtml) {

			if(xhtml) {
				var doc = document.transformXHTMLToDom(xhtml);
				const jsHead= doc.head.getJs(true,true)|| "",
					  allSrcJs=	doc.body.getJs(),
					  jsBody=doc.body.getJs(true,true) || "";
				doc.head.moveStyleSheet();// replace in order just simply all styles sheets in head
				doc.body.moveStyleSheet();// move in order just simply all style shetts of body in head

				// clean up all meta, title residues in the body, move them to the doc head
				var docHead=document.head;
				var linkOfDocHead = {
					first:docHead.querySelector('link:first-of-type'),
					last:docHead.querySelector('link:last-of-type') };
				doc.querySelectorAll('meta, title, base, style').forEach(
					elmt=>docHead.insertBefore( elmt, linkOfDocHead[['STYLE'].indexOf(elmt.nodeName)==-1   ? 'first':'last'] ) );
				var allJs = [].concat( jsHead, jsBody).filter( js => js != "");

				// inject HTML, all ChildNode of head and
				this.textContent = "";
				if(doc.head &amp;&amp; doc.head.children.length!=0)  this.appendChildNodes( doc.head );
				if(doc.body &amp;&amp; doc.body.children.length!=0)  this.appendChildNodes( doc.body );

				if(allJs.length!==0) {
					window.eval.call(window,allJs.join('\n'));
					//todo see other methods , at bottom page in comment

					//replace all js just before end tag body
					const srcsScriptOlder = document.body.getJs().concat( document.head.getJs());
					[...new Set(allSrcJs.filter(src=>srcsScriptOlder.indexOf(src)==-1))].forEach(src=> document.body.insertAdjacentHTML('beforeend',/\.\w{2,3}$/.test(src) ? "&lt;script type='text/javascript' src='"+src+"' >&lt;/script>":"&lt;script type='text/javascript'  >"+src+"&lt;/script>"));
				}

			}

		}
	}});




var te =  performance.now();
var b=Math.random();
var tc=performance.now();
console.log(`execution time : ${tc -  te} ms ` );
</code></pre>
		</article>
	</section>
</div>
<br class="clear">
<footer>
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Sep 16 2021 19:01:55
	GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>
<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/search.js" defer></script>
<script src="scripts/collapse.js" defer></script>
</body>
</html>
